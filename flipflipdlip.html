<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³–æœç¿»ç‰Œè¨˜æ†¶éŠæˆ² - å°æˆ°æ¨¡å¼</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #ffafcc, #ffc8dd, #cdb4db);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            padding: 20px;
            display: flex;
            flex-direction: column;
            min-height: 90vh;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            flex-shrink: 0;
        }
        
        h1 {
            color: #ff5d8f;
            font-size: 2.5rem;
            margin-bottom: 8px;
            background: linear-gradient(to right, #ff5d8f, #ff97b7, #ffafcc);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: #9d8189;
            font-size: 1.1rem;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #ffafcc, #ffc8dd);
            color: #5a3d5c;
            padding: 12px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
            border: 3px solid #ff97b7;
        }
        
        .stats {
            display: flex;
            gap: 20px;
        }
        
        .stat-box {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff5d8f;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #5a3d5c;
            margin-top: 3px;
        }
        
        .controls {
            display: flex;
            gap: 12px;
        }
        
        button {
            background-color: #ff97b7;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 8px rgba(255, 151, 183, 0.3);
        }
        
        button:hover {
            background-color: #ff5d8f;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 93, 143, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        #resetBtn {
            background-color: #ff8fab;
            box-shadow: 0 4px 8px rgba(255, 143, 171, 0.3);
        }
        
        #resetBtn:hover {
            background-color: #ff477e;
            box-shadow: 0 6px 12px rgba(255, 71, 126, 0.4);
        }
        
        .game-board-container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
            min-height: 350px;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            width: 100%;
            max-width: 500px;
        }
        
        .card {
            aspect-ratio: 3/4;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card.matched .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .card-front {
            background: linear-gradient(145deg, #ffafcc, #ffc8dd);
            color: white;
            font-size: 2rem;
            border: 3px solid #ff97b7;
        }
        
        .card-back {
            background: linear-gradient(145deg, #ff97b7, #ff5d8f);
            color: white;
            transform: rotateY(180deg);
            font-size: 2.2rem;
            border: 3px solid #ffafcc;
        }
        
        .instructions {
            background-color: #ffc8dd;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            flex-shrink: 0;
            border: 3px solid #ff97b7;
        }
        
        .instructions h3 {
            color: #5a3d5c;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }
        
        .instructions p {
            color: #5a3d5c;
            line-height: 1.5;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .win-message {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 100;
            flex-direction: column;
            color: white;
            text-align: center;
            padding: 15px;
        }
        
        .win-content {
            background: linear-gradient(135deg, #ff5d8f, #ff97b7, #ffafcc);
            padding: 30px;
            border-radius: 15px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
            border: 5px solid #ffc8dd;
        }
        
        .win-content h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #fff;
        }
        
        .win-content p {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        
        .win-content button {
            font-size: 1rem;
            padding: 12px 25px;
            margin: 15px auto 0;
            background-color: #ff5d8f;
        }
        
        .win-content button:hover {
            background-color: #ff477e;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
                min-height: 85vh;
            }
            
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }
            
            .card-front {
                font-size: 1.5rem;
            }
            
            .card-back {
                font-size: 1.7rem;
            }
            
            .game-info {
                flex-direction: column;
                gap: 12px;
                padding: 12px 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .stats {
                gap: 15px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            .controls {
                width: 100%;
                justify-content: center;
            }
            
            button {
                padding: 8px 15px;
                font-size: 0.85rem;
            }
        }
        
        @media (max-width: 400px) {
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
        
        /* æ·»åŠ æ»¾å‹•æ¢æ¨£å¼ä»¥é˜²è¬ä¸€ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #ffc8dd;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #ff97b7;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #ff5d8f;
        }
        
        /* ç³–æœä¸»é¡Œçš„åœ–æ¨™é¡è‰² */
        .fa-candy-cane, .fa-ice-cream, .fa-cookie-bite, .fa-cake-candles, 
        .fa-lollipop, .fa-mug-hot, .fa-star, .fa-heart,
        .fa-gem, .fa-crown, .fa-cloud, .fa-sun, .fa-moon, .fa-bell,
        .fa-cookie, .fa-cupcake, .fa-donut, .fa-bread-slice {
            color: #fff;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .score-info {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .score-box {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 8px 15px;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            min-width: 100px;
            border: 2px solid #ff97b7;
        }
        
        .score-label {
            font-size: 0.8rem;
            color: #5a3d5c;
            margin-bottom: 3px;
        }
        
        .score-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ff5d8f;
        }
        
        .multiplier-badge {
            display: inline-block;
            background-color: #ff5d8f;
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 5px;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* å°æˆ°æ¨¡å¼æ¨£å¼ */
        .players-container {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .player {
            flex: 1;
            background: linear-gradient(135deg, #ffafcc, #ffc8dd);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 3px solid #ff97b7;
        }
        
        .player.active {
            border-color: #ff0055;
            box-shadow: 0 0 0 3px #ff97b7, 0 5px 15px rgba(255, 0, 85, 0.3);
            transform: translateY(-5px);
        }
        
        .player-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #5a3d5c;
            margin-bottom: 8px;
        }
        
        .player-score {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff5d8f;
        }
        
        .player-turn {
            font-size: 0.9rem;
            color: #ff0055;
            font-weight: bold;
            margin-top: 5px;
            height: 20px;
        }
        
        .vs {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #ff5d8f;
        }
        
        .result-message {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 10px 0;
            text-align: center;
            color: #ff5d8f;
            min-height: 30px;
        }
        
        /* Back button styling */
        .back-to-home {
            margin-top: 15px;
            text-align: center;
        }
        
        .back-btn {
            display: inline-block;
            background-color: rgba(255, 151, 183, 0.2);
            color: #ff5d8f;
            padding: 8px 16px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            border: 2px solid #ff97b7;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(255, 151, 183, 0.3);
        }
        
        .back-btn:hover {
            background-color: #ff5d8f;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 93, 143, 0.4);
            border-color: #ff5d8f;
        }
        
        .back-btn:active {
            transform: translateY(1px);
        }
        
        .back-btn i {
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-candy-cane"></i> ç³–æœç¿»ç‰Œè¨˜æ†¶éŠæˆ² - å°æˆ°æ¨¡å¼</h1>
            <p class="subtitle">å…©åç©å®¶è¼ªæµç¿»ç‰Œï¼Œæ‰¾åˆ°åŒ¹é…çš„ç³–æœç”œé»ï¼Œå¾—åˆ†é«˜è€…ç²å‹ï¼</p>
            <div class="back-to-home">
                <a href="index.html" class="back-btn">
                    <i class="fas fa-arrow-left"></i> è¿”å›éŠæˆ²ä¸­å¿ƒ
                </a>
            </div>
        </header>
        
        <div class="game-info">
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-value" id="moves">0</div>
                    <div class="stat-label">ç¸½ç§»å‹•æ¬¡æ•¸</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="matches">0</div>
                    <div class="stat-label">ç¸½åŒ¹é…å°æ•¸</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="timer">90</div>
                    <div class="stat-label">å‰©é¤˜æ™‚é–“</div>
                </div>
            </div>
            
            <div class="controls">
                <button id="startBtn">
                    <i class="fas fa-play"></i> é–‹å§‹éŠæˆ²
                </button>
                <button id="resetBtn">
                    <i class="fas fa-redo"></i> é‡æ–°é–‹å§‹
                </button>
            </div>
        </div>
        
        <div class="players-container">
            <div class="player active" id="player1">
                <div class="player-name">ç©å®¶ 1</div>
                <div class="player-score" id="player1Score">0</div>
                <div class="player-turn" id="player1Turn">ç­‰å¾…é–‹å§‹...</div>
            </div>
            
            <div class="vs">VS</div>
            
            <div class="player" id="player2">
                <div class="player-name">ç©å®¶ 2</div>
                <div class="player-score" id="player2Score">0</div>
                <div class="player-turn" id="player2Turn"></div>
            </div>
        </div>
        
        <div class="result-message" id="resultMessage">
            é»æ“Š"é–‹å§‹éŠæˆ²"æŒ‰éˆ•é–‹å§‹å°æˆ°ï¼
        </div>
        
        <div class="game-board-container">
            <div class="game-board" id="gameBoard">
                <!-- å¡ç‰‡å°‡é€šéJavaScriptå‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> éŠæˆ²èªªæ˜ - å°æˆ°æ¨¡å¼</h3>
            <p>1. é»æ“Š"é–‹å§‹éŠæˆ²"æŒ‰éˆ•é–‹å§‹å°æˆ°</p>
            <p>2. å…©åç©å®¶è¼ªæµç¿»ç‰Œï¼Œæ¯æ¬¡ç¿»å…©å¼µç‰Œ</p>
            <p>3. å¦‚æœå…©å¼µç‰Œåœ–æ¡ˆåŒ¹é…ï¼Œè©²ç©å®¶å¾—åˆ†ä¸¦ç¹¼çºŒç¿»ç‰Œ</p>
            <p>4. å¦‚æœå…©å¼µç‰Œä¸åŒ¹é…ï¼Œå‰‡è¼ªåˆ°å¦ä¸€åç©å®¶</p>
            <p>5. <strong>é€£å°å¾—åˆ†æ©Ÿåˆ¶</strong>: é€£çºŒåŒ¹é…æˆåŠŸæ™‚å¾—åˆ†ç¿»å€ï¼ç¬¬1æ¬¡å¾—1åˆ†ï¼Œç¬¬2æ¬¡å¾—4åˆ†ï¼Œç¬¬3æ¬¡å¾—9åˆ†...</p>
            <p>6. åœ¨æ™‚é–“ç”¨å®Œä¹‹å‰æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„å¡ç‰‡å°ï¼Œå¾—åˆ†é«˜çš„ç©å®¶ç²å‹ï¼</p>
        </div>
    </div>
    
    <div class="win-message" id="winMessage">
        <div class="win-content">
            <h2><i class="fas fa-trophy"></i> éŠæˆ²çµæŸï¼</h2>
            <p id="winnerMessage"></p>
            <p>ç¸½ç§»å‹•æ¬¡æ•¸: <span id="finalMoves">0</span></p>
            <p>ç¸½åŒ¹é…å°æ•¸: <span id="finalMatches">0</span></p>
            <p>ç©å®¶ 1 å¾—åˆ†: <span id="finalScore1">0</span> åˆ†</p>
            <p>ç©å®¶ 2 å¾—åˆ†: <span id="finalScore2">0</span> åˆ†</p>
            <p>ç”¨æ™‚: <span id="finalTime">0</span> ç§’</p>
            <button id="playAgainBtn">
                <i class="fas fa-play"></i> å†ç©ä¸€æ¬¡
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // éŠæˆ²é…ç½® - ç³–æœç”œé»åœ–æ¨™
            const config = {
                totalPairs: 8, // ç¸½å…±8å°å¡ç‰‡ï¼Œå…±16å¼µ
                totalTime: 90, // éŠæˆ²æ™‚é–“å¢åŠ åˆ°90ç§’
                // ç¢ºä¿æœ‰è¶³å¤ å¤šçš„ç³–æœä¸»é¡Œåœ–æ¨™ï¼Œæ¯å€‹åœ–æ¨™éƒ½æœ‰å°æ‡‰çš„Font Awesomeé¡
                icons: [
                    'fa-candy-cane',       // ç³–æœæ‰‹æ–
                    'fa-ice-cream',        // é›ªç³•
                    'fa-cookie-bite',      // é¤…ä¹¾
                    'fa-cake-candles',     // è›‹ç³•
                    'fa-lollipop',         // æ£’æ£’ç³–
                    'fa-mug-hot',          // ç†±å·§å…‹åŠ›
                    'fa-star',             // æ˜Ÿæ˜Ÿ
                    'fa-heart',            // æ„›å¿ƒ
                    'fa-gem',              // å¯¶çŸ³
                    'fa-crown',            // çš‡å† 
                    'fa-cloud',            // é›²æœµ
                    'fa-sun',              // å¤ªé™½
                    'fa-moon',             // æœˆäº®
                    'fa-bell',             // éˆ´éº
                    'fa-cookie',           // é¤…ä¹¾ï¼ˆå¦ä¸€ç¨®ï¼‰
                    'fa-bread-slice'       // éºµåŒ…ç‰‡
                ]
            };
            
            // éŠæˆ²ç‹€æ…‹
            const gameState = {
                cards: [],
                flippedCards: [],
                matchedPairs: 0,
                moves: 0,
                gameStarted: false,
                gameOver: false,
                timer: config.totalTime,
                timerInterval: null,
                currentPlayer: 1, // 1æˆ–2
                player1Score: 0,
                player2Score: 0,
                consecutiveMatches: 0,
                multiplier: 1
            };
            
            // DOMå…ƒç´ 
            const gameBoard = document.getElementById('gameBoard');
            const movesElement = document.getElementById('moves');
            const matchesElement = document.getElementById('matches');
            const timerElement = document.getElementById('timer');
            const startBtn = document.getElementById('startBtn');
            const resetBtn = document.getElementById('resetBtn');
            const winMessage = document.getElementById('winMessage');
            const finalMovesElement = document.getElementById('finalMoves');
            const finalMatchesElement = document.getElementById('finalMatches');
            const finalTimeElement = document.getElementById('finalTime');
            const playAgainBtn = document.getElementById('playAgainBtn');
            const player1ScoreElement = document.getElementById('player1Score');
            const player2ScoreElement = document.getElementById('player2Score');
            const player1Element = document.getElementById('player1');
            const player2Element = document.getElementById('player2');
            const player1TurnElement = document.getElementById('player1Turn');
            const player2TurnElement = document.getElementById('player2Turn');
            const resultMessageElement = document.getElementById('resultMessage');
            const winnerMessageElement = document.getElementById('winnerMessage');
            const finalScore1Element = document.getElementById('finalScore1');
            const finalScore2Element = document.getElementById('finalScore2');
            
            // åˆå§‹åŒ–éŠæˆ²
            function initGame() {
                console.log("åˆå§‹åŒ–éŠæˆ²...");
                gameState.cards = [];
                gameState.flippedCards = [];
                gameState.matchedPairs = 0;
                gameState.moves = 0;
                gameState.gameStarted = false;
                gameState.gameOver = false;
                gameState.timer = config.totalTime;
                gameState.currentPlayer = 1;
                gameState.player1Score = 0;
                gameState.player2Score = 0;
                gameState.consecutiveMatches = 0;
                gameState.multiplier = 1;
                
                movesElement.textContent = gameState.moves;
                matchesElement.textContent = gameState.matchedPairs;
                timerElement.textContent = gameState.timer;
                player1ScoreElement.textContent = gameState.player1Score;
                player2ScoreElement.textContent = gameState.player2Score;
                
                clearInterval(gameState.timerInterval);
                gameState.timerInterval = null;
                
                winMessage.style.display = 'none';
                
                // è¨­ç½®ç©å®¶ç‹€æ…‹
                player1Element.classList.add('active');
                player2Element.classList.remove('active');
                player1TurnElement.textContent = 'ç­‰å¾…é–‹å§‹...';
                player2TurnElement.textContent = '';
                resultMessageElement.textContent = 'é»æ“Š"é–‹å§‹éŠæˆ²"æŒ‰éˆ•é–‹å§‹å°æˆ°ï¼';
                
                createCards();
                
                // é‡ç½®æŒ‰éˆ•ç‹€æ…‹
                startBtn.disabled = false;
                startBtn.innerHTML = '<i class="fas fa-play"></i> é–‹å§‹éŠæˆ²';
                
                console.log("éŠæˆ²åˆå§‹åŒ–å®Œæˆï¼Œå¡ç‰‡æ•¸é‡:", gameState.cards.length);
            }
            
            // å‰µå»ºå¡ç‰‡
            function createCards() {
                console.log("é–‹å§‹å‰µå»ºå¡ç‰‡...");
                gameBoard.innerHTML = '';
                
                // ä½¿ç”¨å‰8å€‹åœ–æ¨™ï¼ˆç¢ºä¿æœ‰éºµåŒ…åœ–æ¨™ï¼‰
                const selectedIcons = config.icons.slice(0, config.totalPairs);
                
                console.log("é¸ä¸­çš„åœ–æ¨™:", selectedIcons);
                
                // å‰µå»ºå¡ç‰‡å°
                const cardIcons = [...selectedIcons, ...selectedIcons];
                
                // éš¨æ©Ÿæ’åºå¡ç‰‡
                cardIcons.sort(() => 0.5 - Math.random());
                
                console.log("æœ€çµ‚çš„å¡ç‰‡åœ–æ¨™é †åº:", cardIcons);
                
                // ç”Ÿæˆå¡ç‰‡å…ƒç´ 
                cardIcons.forEach((icon, index) => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.icon = icon;
                    card.dataset.index = index;
                    
                    const cardInner = document.createElement('div');
                    cardInner.className = 'card-inner';
                    
                    const cardFront = document.createElement('div');
                    cardFront.className = 'card-front';
                    cardFront.innerHTML = '<i class="fas fa-question"></i>';
                    
                    const cardBack = document.createElement('div');
                    cardBack.className = 'card-back';
                    
                    // ç¢ºä¿åœ–æ¨™é¡åæ­£ç¢º
                    const iconClass = icon;
                    cardBack.innerHTML = `<i class="fas ${iconClass}"></i>`;
                    
                    cardInner.appendChild(cardFront);
                    cardInner.appendChild(cardBack);
                    card.appendChild(cardInner);
                    
                    card.addEventListener('click', () => flipCard(card));
                    
                    gameBoard.appendChild(card);
                    gameState.cards.push(card);
                });
                
                console.log("å¡ç‰‡å‰µå»ºå®Œæˆï¼ŒDOMä¸­çš„å¡ç‰‡æ•¸é‡:", document.querySelectorAll('.card').length);
                
                // é©—è­‰æ‰€æœ‰åœ–æ¨™æ˜¯å¦éƒ½æ­£ç¢ºé¡¯ç¤º
                setTimeout(() => {
                    const icons = Array.from(document.querySelectorAll('.card-back i'));
                    console.log("å¡ç‰‡èƒŒé¢åœ–æ¨™:", icons.map(el => el.className));
                    
                    const missingIcons = icons.filter(icon => {
                        // æª¢æŸ¥åœ–æ¨™æ˜¯å¦åŠ è¼‰
                        const iconClass = icon.className;
                        // ç°¡å–®æª¢æŸ¥ï¼šå¦‚æœåœ–æ¨™çš„å¯¬åº¦ç‚º0ï¼Œå¯èƒ½åœ–æ¨™ç„¡æ³•é¡¯ç¤º
                        return icon.offsetWidth === 0;
                    });
                    
                    if (missingIcons.length > 0) {
                        console.warn("ä»¥ä¸‹åœ–æ¨™å¯èƒ½ç„¡æ³•é¡¯ç¤º:", missingIcons.map(icon => icon.className));
                        // å¦‚æœåœ–æ¨™ç„¡æ³•é¡¯ç¤ºï¼Œä½¿ç”¨æ–‡æœ¬æ›¿ä»£
                        missingIcons.forEach(icon => {
                            const iconName = icon.className.replace('fas ', '');
                            icon.parentElement.innerHTML = iconName.replace('fa-', '').charAt(0).toUpperCase();
                        });
                    } else {
                        console.log("æ‰€æœ‰åœ–æ¨™éƒ½å·²æ­£ç¢ºåŠ è¼‰!");
                    }
                }, 500);
            }
            
            // ç¿»è½‰å¡ç‰‡
            function flipCard(card) {
                // å¦‚æœéŠæˆ²æœªé–‹å§‹ã€éŠæˆ²çµæŸã€å¡ç‰‡å·²åŒ¹é…æˆ–å·²ç¿»é–‹ï¼Œå‰‡å¿½ç•¥é»æ“Š
                if (!gameState.gameStarted || gameState.gameOver || 
                    card.classList.contains('matched') || 
                    card.classList.contains('flipped') || 
                    gameState.flippedCards.length >= 2) {
                    return;
                }
                
                // å¦‚æœé€™æ˜¯ç¬¬ä¸€å¼µç¿»é–‹çš„å¡ç‰‡ï¼Œé–‹å§‹è¨ˆæ™‚
                if (gameState.moves === 0 && gameState.flippedCards.length === 0) {
                    startTimer();
                }
                
                // ç¿»è½‰å¡ç‰‡
                card.classList.add('flipped');
                gameState.flippedCards.push(card);
                
                // å¦‚æœç¿»é–‹äº†å…©å¼µå¡ç‰‡ï¼Œæª¢æŸ¥æ˜¯å¦åŒ¹é…
                if (gameState.flippedCards.length === 2) {
                    gameState.moves++;
                    movesElement.textContent = gameState.moves;
                    
                    const card1 = gameState.flippedCards[0];
                    const card2 = gameState.flippedCards[1];
                    
                    // æª¢æŸ¥å¡ç‰‡æ˜¯å¦åŒ¹é…
                    if (card1.dataset.icon === card2.dataset.icon) {
                        // åŒ¹é…æˆåŠŸ
                        setTimeout(() => {
                            card1.classList.add('matched');
                            card2.classList.add('matched');
                            gameState.flippedCards = [];
                            
                            gameState.matchedPairs++;
                            matchesElement.textContent = gameState.matchedPairs;
                            
                            // è¨ˆç®—é€£å°å¾—åˆ†
                            gameState.consecutiveMatches++;
                            gameState.multiplier = gameState.consecutiveMatches; // é€£å°æ¬¡æ•¸å°±æ˜¯å€æ•¸
                            const pointsEarned = gameState.consecutiveMatches * gameState.consecutiveMatches; // å¾—åˆ†ç‚ºé€£å°æ¬¡æ•¸çš„å¹³æ–¹
                            
                            // çµ¦ç•¶å‰ç©å®¶åŠ åˆ†
                            if (gameState.currentPlayer === 1) {
                                gameState.player1Score += pointsEarned;
                                player1ScoreElement.textContent = gameState.player1Score;
                                resultMessageElement.textContent = `ç©å®¶ 1 åŒ¹é…æˆåŠŸï¼ç²å¾— ${pointsEarned} åˆ†ï¼ç¹¼çºŒç¿»ç‰Œï¼`;
                            } else {
                                gameState.player2Score += pointsEarned;
                                player2ScoreElement.textContent = gameState.player2Score;
                                resultMessageElement.textContent = `ç©å®¶ 2 åŒ¹é…æˆåŠŸï¼ç²å¾— ${pointsEarned} åˆ†ï¼ç¹¼çºŒç¿»ç‰Œï¼`;
                            }
                            
                            // æª¢æŸ¥æ˜¯å¦ç²å‹
                            if (gameState.matchedPairs === config.totalPairs) {
                                winGame();
                            }
                        }, 500);
                    } else {
                        // ä¸åŒ¹é…ï¼Œç¿»å›å»ä¸¦åˆ‡æ›ç©å®¶
                        setTimeout(() => {
                            card1.classList.remove('flipped');
                            card2.classList.remove('flipped');
                            gameState.flippedCards = [];
                            
                            // é‡ç½®é€£å°æ¬¡æ•¸
                            gameState.consecutiveMatches = 0;
                            gameState.multiplier = 1;
                            
                            // åˆ‡æ›ç©å®¶
                            switchPlayer();
                        }, 1000);
                    }
                }
            }
            
            // åˆ‡æ›ç©å®¶
            function switchPlayer() {
                if (gameState.currentPlayer === 1) {
                    gameState.currentPlayer = 2;
                    player1Element.classList.remove('active');
                    player2Element.classList.add('active');
                    player1TurnElement.textContent = '';
                    player2TurnElement.textContent = 'ç•¶å‰å›åˆ âœ“';
                    resultMessageElement.textContent = 'è¼ªåˆ°ç©å®¶ 2 ç¿»ç‰Œï¼';
                } else {
                    gameState.currentPlayer = 1;
                    player1Element.classList.add('active');
                    player2Element.classList.remove('active');
                    player1TurnElement.textContent = 'ç•¶å‰å›åˆ âœ“';
                    player2TurnElement.textContent = '';
                    resultMessageElement.textContent = 'è¼ªåˆ°ç©å®¶ 1 ç¿»ç‰Œï¼';
                }
            }
            
            // é–‹å§‹è¨ˆæ™‚å™¨
            function startTimer() {
                if (gameState.timerInterval) {
                    clearInterval(gameState.timerInterval);
                }
                
                gameState.timerInterval = setInterval(() => {
                    gameState.timer--;
                    timerElement.textContent = gameState.timer;
                    
                    // æ™‚é–“åˆ°ï¼ŒéŠæˆ²çµæŸ
                    if (gameState.timer <= 0) {
                        clearInterval(gameState.timerInterval);
                        gameState.gameOver = true;
                        setTimeout(() => {
                            winGame();
                        }, 300);
                    }
                }, 1000);
            }
            
            // ç²å‹è™•ç†
            function winGame() {
                clearInterval(gameState.timerInterval);
                gameState.gameOver = true;
                
                // ç¢ºå®šç²å‹è€…
                let winnerMessage = '';
                if (gameState.player1Score > gameState.player2Score) {
                    winnerMessage = 'ç©å®¶ 1 ç²å‹ï¼ğŸ‰';
                } else if (gameState.player2Score > gameState.player1Score) {
                    winnerMessage = 'ç©å®¶ 2 ç²å‹ï¼ğŸ‰';
                } else {
                    winnerMessage = 'å¹³å±€ï¼é›™æ–¹è¡¨ç¾éƒ½å¾ˆæ£’ï¼';
                }
                
                setTimeout(() => {
                    finalMovesElement.textContent = gameState.moves;
                    finalMatchesElement.textContent = gameState.matchedPairs;
                    finalScore1Element.textContent = gameState.player1Score;
                    finalScore2Element.textContent = gameState.player2Score;
                    finalTimeElement.textContent = config.totalTime - gameState.timer;
                    winnerMessageElement.textContent = winnerMessage;
                    winMessage.style.display = 'flex';
                }, 800);
            }
            
            // é–‹å§‹éŠæˆ²
            function startGame() {
                if (gameState.gameStarted) return;
                
                gameState.gameStarted = true;
                startBtn.disabled = true;
                startBtn.innerHTML = '<i class="fas fa-play"></i> éŠæˆ²ä¸­...';
                
                // è¨­ç½®ç©å®¶ç‹€æ…‹
                player1TurnElement.textContent = 'ç•¶å‰å›åˆ âœ“';
                resultMessageElement.textContent = 'ç©å®¶ 1 é–‹å§‹éŠæˆ²ï¼';
                
                // é¡¯ç¤ºæ‰€æœ‰å¡ç‰‡2.5ç§’é˜ï¼Œç„¶å¾Œç¿»å›å»
                showAllCards();
            }
            
            // é¡¯ç¤ºæ‰€æœ‰å¡ç‰‡
            function showAllCards() {
                gameState.cards.forEach(card => {
                    card.classList.add('flipped');
                });
                
                setTimeout(() => {
                    gameState.cards.forEach(card => {
                        card.classList.remove('flipped');
                    });
                    // éŠæˆ²æ­£å¼é–‹å§‹
                    resultMessageElement.textContent = 'ç©å®¶ 1 é–‹å§‹ç¿»ç‰Œï¼';
                }, 2500);
            }
            
            // äº‹ä»¶ç›£è½å™¨
            startBtn.addEventListener('click', startGame);
            
            resetBtn.addEventListener('click', () => {
                initGame();
            });
            
            playAgainBtn.addEventListener('click', () => {
                winMessage.style.display = 'none';
                initGame();
            });
            
            // åˆå§‹åŒ–éŠæˆ²
            initGame();
        });
    </script>
</body>
</html>